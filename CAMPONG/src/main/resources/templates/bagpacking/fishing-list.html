<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="~{common/layout :: head}"></th:block>
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/bagpacking.css}">
	<script th:inline="javascript">
   			 /*<![CDATA[*/
		
   			$(function(){
			var selectedSido = /*[[${param.sido}]]*/;
			var selectedGugun = /*[[${param.gugun}]]*/;
			var temp = {};
			temp['value'] = selectedSido;
			categoryChange(temp);
			var target = document.getElementById("sido");
			for(var i = 0; i < target.options.length; i++){
				if(target.options[i].value == selectedSido){
					target.options[i].selected = true;
					break;
				}
			}
			
			
			target = document.getElementById("gugun");
			for(var i = 0; i < target.options.length; i++){
				if(target.options[i].value == selectedGugun){
					target.options[i].selected = true;
					break;
				}
			}
		});
	
       function init(){
    	   
       }
   			 
   				 
		/* 드롭박스 */
		function categoryChange(e) {
			
			var good_a = ["전체", "강남구", "강동구", "강북구", "강서구", "관악구", "광진구", "구로구", "금천구", "노원구", "도봉구", "동대문구", "동작구", "마포구", "서대문구", "서초구", "성동구", "성북구", "송파구", "양천구", "영등포구", "용산구", "은평구", "종로구", "중구", "중랑구"];
			var good_b = ["전체", "강서구", "금정구", "기장군", "남구", "동구", "동래구", "부산진구", "북구", "사상구", "사하구", "서구", "수영구", "연제구", "영도구", "중구", "해운대구"];
			var good_c = ["전체", "남구", "달서구", "달성군", "동구", "북구", "상주", "서구", "수성구", "중구"];
			var good_d = ["전체", "강화군", "계양구", "남구", "남동구", "동구", "부평구", "서구", "연수구", "옹진군", "중구"];
			var good_e = ["전체", "광산구", "남구", "동구", "북구", "서구"];
			var good_f = ["전체", "대덕구", "동구", "서구", "유성구", "중구"];
			var good_g = ["전체", "남구", "동구", "북구", "울주군", "중구"];
			var good_h = ["전체", "금남면", "세종시", "소정면", "연서면", "전동면"];
			var good_i = ["전체", "가평군", "고양시", "과천시", "광명시", "광주시", "구리시", "군포시", "김포시", "남양주시", "동두천시", "부천시", "성남시", "수원시", "시흥시", "안산시", "안성시", "안양시", "양주시", "양평군", "여주시", "연천군", "오산시", "용인시", "의왕시", "의정부시", "이천시", "파주시", "평택시", "포천시", "하남시", "화성시"];
			var good_j = ["전체", "강릉시", "고성군", "동해시", "삼척시", "속초시", "양구군", "양양군", "영월군", "원주시", "인제군", "정선군", "철원군", "춘천시", "태백시", "평창군", "홍천군", "화천군", "횡성군"];
			var good_k = ["전체", "괴산군", "단양군", "보은군", "영동군", "옥천군", "음성군", "제천시", "증평군", "진천군", "청원군", "청주시", "충주시"];
			var good_l = ["전체", "계룡시", "공주시", "금상군", "논산시", "당진시", "보령시", "부여군", "서산시", "서천군", "아산시", "예산군", "천안시", "청양군", "태안군", "홍성군"];
			var good_n = ["전체", "고창군", "군산시", "김제시", "남원시", "무주군", "부안군", "순창군", "완주군", "익산시", "임실군", "장수군", "전주시", "정읍시", "진안군"];
			var good_m = ["전체", "강진군", "고흥군", "곡성군", "광양시", "구례군", "나주시", "담양군", "목포시", "무안군", "보성군", "순천시", "신안군", "여수시", "영광군", "영암군", "완도군", "장성군", "장흥군", "진도군", "함평군", "해남군", "화순군"];
			var good_o = ["전체", "경산시", "경주시", "고령군", "구미시", "군위군", "김천시", "문경시", "봉화군", "상주시", "성주군", "안동시", "영덕군", "영양군", "영주시", "영천시", "예천군", "울릉군", "울진군", "의성군", "청도군", "청송군", "칠곡군", "포항시"];
			var good_p = ["전체", "거제시", "거창군", "고성군", "김해시", "남해군", "밀양시", "사천시", "산청군", "양산시", "의령군", "진주시", "창녕군", "창원시", "통영시", "하동군", "함안군", "함양군", "합천군"];
			var good_q = ["전체", "서귀포시", "제주시"];
			var target = document.getElementById("gugun");
			
			
			if (e.value == '서울') var d = good_a;
			else if (e.value == "부산시") var d = good_b;
			else if (e.value == "대구시") var d = good_c;
			else if (e.value == "인천시") var d = good_d;
			else if (e.value == "광주시") var d = good_e;
			else if (e.value == "대전시") var d = good_f;
			else if (e.value == "울산시") var d = good_g;
			else if (e.value == "세종시") var d = good_h;
			else if (e.value == "경기도") var d = good_i;
			else if (e.value == "강원도") var d = good_j;
			else if (e.value == "충청북도") var d = good_k;
			else if (e.value == "충청남도") var d = good_l;
			else if (e.value == "전라북도") var d = good_m;
			else if (e.value == "전라남도") var d = good_n;
			else if (e.value == "경상북도") var d = good_o;
			else if (e.value == "경상남도") var d = good_p;
			else if (e.value == "제주도") var d = good_q;
			else var d = good_a;

			
			target.options.length = 0;
	
			for (x in d) {
				var opt = document.createElement("option");
				opt.value = d[x];
				opt.innerHTML = d[x];
				target.appendChild(opt);
			}
			
		}
		/*]]>*/
	</script>
</head>

<body>
	<header th:replace="~{common/layout :: #header}"></header>
	
	<!-- **************** MAIN CONTENT START **************** -->
	<main>
		<!-- =======================Main Banner START -->
		<section class="pt-8">
			<div class="container">
				<!-- Background image -->
				<div class="p-3 p-sm-5 rounded-3"
					style="background-image: url(/assets/images/bagpacking/fishing.jpg); background-position: center center; background-repeat: no-repeat; background-size: cover;">
				<!-- Banner title -->
				<div class="row">
					<div class="col-md-8 mx-auto my-5">
						<h1 class="text-center text-white">백패킹</h1>
						<ul class="nav nav-divider h5 text-white mb-0 justify-content-center">
							<li class="nav-item">낚시</li>
						</ul>
					</div>
				</div>
				</div>

				<!-- Search START -->
				<div class="row mt-n4 mt-sm-n7">
					<div class="col-11 mx-auto">

						<!-- Booking from START -->
						<div class="form-control-bg-light bg-mode border p-4 rounded-3">
							<div class="row g-4">


								<div class="col-lg-12">
									<div class="tab-content mt-0" id="pills-tabContent">
										<!-- One way tab START -->
										<div class="tab-pane fade show active" id="cab-one-way" role="tabpanel"
											aria-labelledby="cab-one-way-tab">
											<form id="cardForm" th:action="@{/bagpacking/fishing-list}" method="get" class="row g-4 align-items-center">
												<!-- *** -->
												<input type="hidden" id="page" name="page" value="1">
												<div class="col-xl-10">
													<div class="row g-4">
														<!-- Pickup -->
														<div class="col-md-6 col-xl-6">
															<div class="form-size-lg">
																<select class="form-select-custom me-4" id="sido" name="sido" onchange="categoryChange(this)" th:value="${selectedSido}">
																	<option>전체</option>
																	<option value="서울">서울</option>
																	<option value="부산시">부산시</option>
																	<option value="대구시">대구시</option>
																	<option value="인천시">인천시</option>
																	<option value="광주시">광주시</option>
																	<option value="대전시">대전시</option>
																	<option value="울산시">울산시</option>
																	<option value="세종시">세종시</option>
																	<option value="경기도">경기도</option>
																	<option value="강원도">강원도</option>
																	<option value="충청북도">충청북도</option>
																	<option value="충청남도">충청남도</option>
																	<option value="전라북도">전라북도</option>
																	<option value="전라남도">전라남도</option>
																	<option value="경상북도">경상북도</option>
																	<option value="경상남도">경상남도</option>
																	<option value="제주도">제주도</option>
																</select>
																<select class="form-select-custom" id="gugun" name="gugun">
																	<option>전체</option>
																</select>
															</div>
														</div>
														<div class="col-md-6 col-xl-6">
															<div class="form-size-lg">
																<input class="form-control me-1 ps-2"
																	type="text" data-bs-toggle="dropdown" placeholder="키워드" id="searchValue" name="searchValue" th:value="${param.searchValue}">
															</div>
														</div>
													</div>
												</div>

												<div class="col-xl-2 d-grid mt-xl-auto">
													<button type="submit" class="btn btn-primary-custom mb-0">검색</button>
												</div>
											</form>
										</div>
										<!-- One way tab END -->
									</div>
								</div>
							</div>
						</div>
						<!-- Booking from END -->
					</div>
				</div>
				<!-- Search END -->
			</div>
		</section>
		<!-- =======================Main Banner END -->

		<!-- =======================Tour grid START -->
		<section class="pt-0">
			<div class="container">

				<!-- Filter and content START -->
				<div class="row g-4 align-items-center justify-content-between mb-4">
					<!-- Content -->
					<div class="col-12 col-xl-8">
						<th:block th:if="${list == null}">
							<h5 class="mb-0">총 데이터 수 0개</h5>
						</th:block>
						<th:block th:if="${list != null}">
							<h5 class="mb-0">총 데이터 수 [[${bagpackingCount}]]개</h5>
						</th:block>
					</div>
				</div>
				<!-- Filter and content END -->

				<div class="row g-4">
					<th:block th:if="${list == null}">
						<div>
							<h6>조회된 글이 없습니다.</h6>
						</div>
					</th:block>
					<th:block th:if="${list != null}">
					<th:block th:each="content : ${list}">
					<!-- Card item START -->
					<div class="col-md-6 col-xl-4" >
						<div class="card shadow-sm card-hover-shadow pb-0 h-100">
							<!-- Overlay item -->
							<div class="position-relative">
								<!-- Image -->
								<img th:src="|/assets/images/bagpacking/fishing${content.fishingNo % 18}.jpg|" class="card-img-top" alt="Card image" style="height: 280px;">
								<!-- Overlay -->
								<div class="card-img-overlay d-flex flex-column p-4 z-index-1">
									<!-- Card overlay top -->
									<div>
										<span class="badge text-bg-dark">낚시</span>
									</div>
								</div>
							</div>

							<!-- Card body START -->
							<div class="card-body px-3 hstack justify-content-between">
								<!-- Title -->
								<h5 class="card-title text-truncate mb-0 w-75"><a th:href="|/bagpacking/fishing-detail?fishingNo=${content.fishingNo}|"
										class="stretched-link">[[${content.fishingNm}]]</a></h5>
								<!-- Button -->
								<div class="mt-2 mt-sm-0">
									<a th:href="|/bagpacking/fishing-detail?fishingNo=${content.fishingNo}|" class="btn btn-sm btn-primary-custom mb-0">상세보기</a>
								</div>
							</div>
							<!-- Card body END -->
						</div>
					</div>
					</th:block>
					</th:block>
					<!-- Card item END -->
				</div> <!-- Row END -->
				
				<!-- 페이징 -->
				<th:block th:if="${list.size == 0}">
						<div></div>
					</th:block>
					<th:block th:if="${list.size != 0}">
				<div class="row" style="margin-top:50px; margin-bottom:50px;">
					<div class="col-12">
						<nav class="mt-4 d-flex justify-content-center" aria-label="navigation">
							<ul class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
								<!--이전 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('${pageInfo.prevPage}');|" tabindex="-1">
										<i class="fa-solid fa-angle-left"></i>
									</button>
								</li>
											
								<!-- 10개 페이지 -->
								<th:block th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
									<th:block th:if="${status.current == pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link active" th:onclick="|movePage('${status.current}');|" disabled>
											[[${status.current}]]
											</button>
										</li>
									</th:block>
									<th:block th:if="${status.current != pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link" th:onclick="|movePage('${status.current}');|">
											[[${status.current}]]
											</button>
										</li>
									</th:block>
								</th:block>
								
								<!--다음 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link" th:onclick="|movePage('${pageInfo.nextPage}');|">
										<i class="fa-solid fa-angle-right"></i>
									</button>
								</li>
							</ul>
						</nav>
					</div>
				</div>
				<!-- Pagination END-->
			</div>
		</section>
		<!-- =======================Tour grid END -->
	</main>
	<!-- **************** MAIN CONTENT END **************** -->

	<!-- Back to top -->
	<div class="back-top"></div>

	<footer th:replace="~{common/layout :: #footer}"></footer>
	
	<!-- 도시 시군구 관련 -->
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js}"></script>
	
	<script th:src="@{/assets/vendor/nouislider/nouislider.min.js}"></script>
	
	<script type="text/javascript">
		<!-- 검색필터유지하고 페이징 -->
		function movePage(pageNum){
			var form = document.getElementById("cardForm");
			var page = document.getElementById("page");
			page.value = pageNum;
			form.submit();
		}
	</script>
	
</body>
</html>