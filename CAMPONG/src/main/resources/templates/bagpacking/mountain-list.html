<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="~{common/layout :: head}"></th:block>
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/bagpacking.css}">
</head>

<body>
	<header th:replace="~{common/layout :: #header}"></header>
	
	<!-- **************** MAIN CONTENT START **************** -->
	<main>
		<!-- =======================Main Banner START -->
		<section class="pt-8">
			<div class="container">
				<!-- Background image -->
				<div class="p-3 p-sm-5 rounded-3"
					style="background-image: url(/assets/images/bagpacking/bagpacking.png); background-position: center center; background-repeat: no-repeat; background-size: cover;">
				<!-- Banner title -->
				<div class="row">
					<div class="col-md-8 mx-auto my-5">
						<h1 class="text-center text-white">백패킹</h1>
						<ul class="nav nav-divider h5 text-white mb-0 justify-content-center">
							<li class="nav-item">산</li>
						</ul>
					</div>
				</div>
				</div>

				<!-- Search START -->
				<div class="row mt-n4 mt-sm-n7">
					<div class="col-11 mx-auto">

						<!-- Booking from START -->
						<div class="form-control-bg-light bg-mode border p-4 rounded-3">
							<div class="row g-4">


								<div class="col-lg-12">
									<div class="tab-content mt-0" id="pills-tabContent">
										<!-- One way tab START -->
										<div class="tab-pane fade show active" id="cab-one-way" role="tabpanel"
											aria-labelledby="cab-one-way-tab">
											<form th:action="@{/bagpacking/mountain-list}" method="get" class="row g-4 align-items-center">
												<div class="col-xl-10">
													<div class="row g-4">
														<!-- Pickup -->
														<div class="col-md-6 col-xl-6">
															<div class="form-size-lg">
																<select class="form-select-custom me-4" id="sido" name="sido">
																	<option value="">시/도 선택</option>
																</select>
																<select class="form-select-custom" id="gugun" name="gugun"></select>
															</div>
														</div>
														<div class="col-md-6 col-xl-6">
															<div class="form-size-lg">
																<input class="form-control me-1 ps-2"
																	type="text" data-bs-toggle="dropdown" placeholder="키워드" id="searchValue" name="searchValue" th:value="${param.searchValue}">
															</div>
														</div>
													</div>
												</div>

												<div class="col-xl-2 d-grid mt-xl-auto">
													<button type="submit" class="btn btn-primary-custom mb-0">검색</button>
												</div>
											</form>
										</div>
										<!-- One way tab END -->
									</div>
								</div>
							</div>
						</div>
						<!-- Booking from END -->
					</div>
				</div>
				<!-- Search END -->
			</div>
		</section>
		<!-- =======================Main Banner END -->

		<!-- =======================Tour grid START -->
		<section class="pt-0">
			<div class="container">

				<!-- Filter and content START -->
				<div class="row g-4 align-items-center justify-content-between mb-4">
					<!-- Content -->
					<div class="col-12 col-xl-8">
						<th:block th:if="${list == null}">
							<h5 class="mb-0">총 데이터 수 0개</h5>
						</th:block>
						<th:block th:if="${list != null}">
							<h5 class="mb-0">총 데이터 수 [[${bagpackingCount}]]개</h5>
						</th:block>
					</div>

					<!-- Select option -->
					<div class="col-xl-2">
						<form class="form-control-bg-light">
							<select class="form-select js-choice">
								<option value="sortReadCount">조회순</option>
								<option value="sortName">이름순</option>
							</select>
						</form>
					</div>
				</div>
				<!-- Filter and content END -->

				<div class="row g-4">
					<th:block th:if="${list == null}">
						<div>
							<h6>조회된 글이 없습니다.</h6>
						</div>
					</th:block>
					<th:block th:if="${list != null}">
					<th:block th:each="content : ${list}">
					<!-- Card item START -->
					<div class="col-md-6 col-xl-4" >
						<div class="card shadow-sm card-hover-shadow pb-0 h-100">
							<!-- Overlay item -->
							<div class="position-relative">
								<!-- Image -->
								<th:block th:if="${content.firstimage != ''}">
									<img th:src="@{${content.firstimage}}" class="card-img-top" alt="Card image" style="height: 280px;">
								</th:block>
								<th:block th:if="${content.firstimage == ''}">
									<img th:src="@{/assets/images/bagpacking/mountain.jpg}" class="card-img-top" alt="Card image" style="height: 280px;">
								</th:block>
								<!-- Overlay -->
								<div class="card-img-overlay d-flex flex-column p-4 z-index-1">
									<!-- Card overlay top -->
									<div>
										<span class="badge text-bg-dark">산</span>
									</div>
								</div>
							</div>

							<!-- Card body START -->
							<div class="card-body px-3 hstack justify-content-between">
								<!-- Title -->
								<h5 class="card-title text-truncate mb-0 w-75"><a th:href="|/bagpacking/bagpacking-detail?contentId=${content.contentId}|"
										class="stretched-link">[[${content.title}]]</a></h5>
								<!-- Button -->
								<div class="mt-2 mt-sm-0">
									<a th:href="|/bagpacking/bagpacking-detail?contentId=${content.contentId}|" class="btn btn-sm btn-primary-custom mb-0">상세보기</a>
								</div>
							</div>
							<!-- Card body END -->
						</div>
					</div>
					</th:block>
					</th:block>
					<!-- Card item END -->
				</div> <!-- Row END -->
				
				<!-- 페이징 -->
				<th:block th:if="${list.size == 0}">
						<div></div>
					</th:block>
					<th:block th:if="${list.size != 0}">
				<div class="row" style="margin-top:50px; margin-bottom:50px;">
					<div class="col-12">
						<nav class="mt-4 d-flex justify-content-center" aria-label="navigation">
							<ul class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
								<!--이전 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link"
										th:onclick="|movePage('/bagpacking/mountain-list?page=${pageInfo.prevPage}');|" tabindex="-1">
										<i class="fa-solid fa-angle-left"></i>
									</button>
								</li>
											
								<!-- 10개 페이지 -->
								<th:block th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
									<th:block th:if="${status.current == pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link active" th:onclick="|movePage('/bagpacking/mountain-list?page=${status.current}');|" disabled>
											[[${status.current}]]
											</button>
										</li>
									</th:block>
									<th:block th:if="${status.current != pageInfo.currentPage}">
										<li class="page-item mb-0">
											<button class="page-link" th:onclick="|movePage('/bagpacking/mountain-list?page=${status.current}');|">
											[[${status.current}]]
											</button>
										</li>
									</th:block>
								</th:block>
								
								<!--다음 페이지 -->
								<li class="page-item mb-0">
									<button class="page-link" th:onclick="|movePage('/bagpacking/mountain-list?page=${pageInfo.nextPage}');|">
										<i class="fa-solid fa-angle-right"></i>
									</button>
								</li>
							</ul>
						</nav>
					</div>
				</div>
				<!-- Pagination END-->
			</div>
		</section>
		<!-- =======================Tour grid END -->
	</main>
	<!-- **************** MAIN CONTENT END **************** -->

	<!-- Back to top -->
	<div class="back-top"></div>

	<footer th:replace="~{common/layout :: #footer}"></footer>
	
	<!-- 도시 시군구 관련 -->
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js}"></script>
	<script th:src="@{/assets/js/location.js}"></script>
	
	<script th:src="@{/assets/vendor/nouislider/nouislider.min.js}"></script>
	
	<script type="text/javascript">
	function movePage(pageUrl){
		var searchValue = document.getElementById("searchValue"); // 갤럭시
		var searchTypes = document.getElementsByName("searchType"); // title
		var sido = document.getElementById("sido");
		var gugun = document.getElementById("gugun");
		var searchType = 'title';
		
		if(sido.selectd == true){
			pageUrl = pageUrl + '&sido=' + sido.value; 
		}
		if(gugun.selectd == true){
			pageUrl = pageUrl + '&gugun=' + gugun.value; 
		}
		if(searchValue.value.length > 0){
			pageUrl = pageUrl + '&searchValue=' + searchValue.value; 
		} 
		
		location.href = encodeURI(pageUrl);	
	}
	</script>
	
	<script th:inline="javascript">
		/*<![CDATA[*/
			$('document').ready(function () {
			    var area0 = ["서울특별시", "인천광역시", "대전광역시", "광주광역시", "대구광역시", "울산광역시", "부산광역시", "경기도", "강원도", "충청북도", "충청남도", "전라북도", "전라남도", "경상북도", "경상남도", "제주도"];
			    var area1 = ["전체", "강남구", "강동구", "강북구", "강서구", "관악구", "광진구", "구로구", "금천구", "노원구", "도봉구", "동대문구", "동작구", "마포구", "서대문구", "서초구", "성동구", "성북구", "송파구", "양천구", "영등포구", "용산구", "은평구", "종로구", "중구", "중랑구"];
			    var area2 = ["전체", "계양구", "남구", "남동구", "동구", "부평구", "서구", "연수구", "중구", "강화군", "옹진군"];
			    var area3 = ["전체", "대덕구", "동구", "서구", "유성구", "중구"];
			    var area4 = ["전체", "광산구", "남구", "동구", "북구", "서구"];
			    var area5 = ["전체", "남구", "달서구", "동구", "북구", "서구", "수성구", "중구", "달성군"];
			    var area6 = ["전체", "남구", "동구", "북구", "중구", "울주군"];
			    var area7 = ["전체", "강서구", "금정구", "남구", "동구", "동래구", "부산진구", "북구", "사상구", "사하구", "서구", "수영구", "연제구", "영도구", "중구", "해운대구", "기장군"];
			    var area8 = ["전체", "고양시", "과천시", "광명시", "광주시", "구리시", "군포시", "김포시", "남양주시", "동두천시", "부천시", "성남시", "수원시", "시흥시", "안산시", "안성시", "안양시", "양주시", "오산시", "용인시", "의왕시", "의정부시", "이천시", "파주시", "평택시", "포천시", "하남시", "화성시", "가평군", "양평군", "여주군", "연천군"];
			    var area9 = ["전체", "강릉시", "동해시", "삼척시", "속초시", "원주시", "춘천시", "태백시", "고성군", "양구군", "양양군", "영월군", "인제군", "정선군", "철원군", "평창군", "홍천군", "화천군", "횡성군"];
			    var area10 = ["전체", "제천시", "청주시", "충주시", "괴산군", "단양군", "보은군", "영동군", "옥천군", "음성군", "증평군", "진천군", "청원군"];
			    var area11 = ["전체", "계룡시", "공주시", "논산시", "보령시", "서산시", "아산시", "천안시", "금산군", "당진군", "부여군", "서천군", "연기군", "예산군", "청양군", "태안군", "홍성군"];
			    var area12 = ["전체", "군산시", "김제시", "남원시", "익산시", "전주시", "정읍시", "고창군", "무주군", "부안군", "순창군", "완주군", "임실군", "장수군", "진안군"];
			    var area13 = ["전체", "광양시", "나주시", "목포시", "순천시", "여수시", "강진군", "고흥군", "곡성군", "구례군", "담양군", "무안군", "보성군", "신안군", "영광군", "영암군", "완도군", "장성군", "장흥군", "진도군", "함평군", "해남군", "화순군"];
			    var area14 = ["전체", "경산시", "경주시", "구미시", "김천시", "문경시", "상주시", "안동시", "영주시", "영천시", "포항시", "고령군", "군위군", "봉화군", "성주군", "영덕군", "영양군", "예천군", "울릉군", "울진군", "의성군", "청도군", "청송군", "칠곡군"];
			    var area15 = ["전체", "거제시", "김해시", "마산시", "밀양시", "사천시", "양산시", "진주시", "진해시", "창원시", "통영시", "거창군", "고성군", "남해군", "산청군", "의령군", "창녕군", "하동군", "함안군", "함양군", "합천군"];
			    var area16 = ["전체", "서귀포시", "제주시", "남제주군", "북제주군"];
			
			    // 시/도 선택 박스 초기화
			    $("#sido").each(function () {
			        $selsido = $(this);
			        $.each(eval(area0), function () {
			            $selsido.append("<option value='" + this + "'>" + this + "</option>");
			        });
			        $selsido.next().append("<option value=''>구/군 선택</option>");
			    });
				
			
			    // 시/도 선택시 구/군 설정
			    $("#sido").change(function () {
			        var area = "area" + $("option", $(this)).index($("option:selected", $(this))); // 선택지역의 구군 Array
			        var $gugun = $(this).next(); // 선택영역 군구 객체
			        $("option", $gugun).remove(); // 구군 초기화
			
			        if (area == "area0")
			            $gugun.append("<option value=''>구/군 선택</option>");
			        else {
			            $.each(eval(area), function () {
			                $gugun.append("<option value='" + this + "'>" + this + "</option>");
			            });
			        }
			    });
			});
		/*]]>*/
	</script>
	
</body>
</html>