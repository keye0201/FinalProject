<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.multi.campong.car.model.mapper.CarMapper">

	<resultMap type="Car" id="CarResultMap">
		<id property="rentNo" column="RENT_NO"/>
		<result property="entrpsNm" column="ENTRPSNM"/>
		<result property="rdnmadr" column="RDNMADR"/> 
		<result property="latitude" column="LATITUDE"/>
		<result property="longitude" column="LONGITUDE"/>
		<result property="phoneNumber" column="PHONENUMBER"/>
		<result property="homepageUrl" column="HOMEPAGEURL"/>
	</resultMap>

 	<select id="selectCarCount" resultType="int" parameterType="map">
		SELECT COUNT(*) FROM RENT 
		WHERE 1=1
		<if test="searchValue != null">
			AND ENTRPSNM LIKE '%${searchValue}%' 
		</if>		
	</select>

	<select id="selectCarList" resultMap="CarResultMap" parameterType="map">
	<!-- <select id="selectCarList" resultType="Car" parameterType="map"> -->
		SELECT 
			RENT_NO, ENTRPSNM, RDNMADR, LATITUDE, LONGITUDE, PHONENUMBER, HOMEPAGEURL
		FROM RENT 
		WHERE 1=1
		<if test="city != null">
		AND RDNMADR LIKE '%${city}%' 
		</if>		
		ORDER BY RENT_NO DESC LIMIT ${limit} OFFSET ${offset}
	</select> 
	
	<select id="selectCarByNo" resultType="Car" parameterType="int">
		SELECT * FROM RENT 
		WHERE RENT_NO = #{RENT_NO}
	</select>
	
</mapper>